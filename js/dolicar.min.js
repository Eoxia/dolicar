window.dolicar||(window.dolicar={},window.dolicar.scriptsLoaded=!1),window.dolicar.scriptsLoaded||(window.dolicar.init=function(){window.dolicar.load_list_script()},window.dolicar.load_list_script=function(){if(!window.dolicar.scriptsLoaded){for(var o in window.dolicar)if(window.dolicar.hasOwnProperty(o)&&"object"==typeof window.dolicar[o])for(var i in"function"==typeof window.dolicar[o].init&&window.dolicar[o].init(),window.dolicar[o])window.dolicar[o].hasOwnProperty(i)&&"object"==typeof window.dolicar[o][i]&&"function"==typeof window.dolicar[o][i].init&&window.dolicar[o][i].init();window.dolicar.scriptsLoaded=!0}},window.dolicar.refresh=function(){for(var o in window.dolicar)if(window.dolicar.hasOwnProperty(o)&&"object"==typeof window.dolicar[o])for(var i in"function"==typeof window.dolicar[o].refresh&&window.dolicar[o].refresh(),window.dolicar[o])window.dolicar[o].hasOwnProperty(i)&&window.dolicar[o][i]&&"function"==typeof window.dolicar[o][i].refresh&&window.dolicar[o][i].refresh()},$(document).ready(window.dolicar.init)),window.dolicar.registrationcertificate={},window.dolicar.registrationcertificate.init=function(){window.dolicar.registrationcertificate.event()},window.dolicar.registrationcertificate.event=function(){$(document).on("change","#fk_product",window.dolicar.registrationcertificate.reloadFields),$("#public-vehicle-log-book-form").on("submit",function(o){o.preventDefault(),$(this).find(".public-vehicle-log-book-validate").hasClass("button-disable")||window.dolicar.registrationcertificate.createPublicVehicleLogBook()}),$(document).on("touchstart mousedown",".canvas-signature",function(){window.saturne.toolbox.removeAddButtonClass("public-vehicle-log-book-validate","button-grey button-disable","button-blue")}),$(document).on("click",".signature-erase",function(){window.saturne.toolbox.removeAddButtonClass("public-vehicle-log-book-validate","button-blue","button-grey button-disable")})},window.dolicar.registrationcertificate.reloadFields=function(){var o=window.saturne.toolbox.getToken(),i=window.saturne.toolbox.getQuerySeparator(document.URL),n=$(this).val();window.saturne.loader.display($(".field_fk_lot")),window.saturne.loader.display($(".field_d1_vehicle_brand")),$.ajax({url:document.URL+i+"&fk_product="+n+"&token="+o,type:"POST",processData:!1,contentType:!1,success:function(o){$(".field_fk_lot").replaceWith($(o).find(".field_fk_lot")),$(".field_d1_vehicle_brand").replaceWith($(o).find(".field_d1_vehicle_brand"))},error:function(){}})},window.dolicar.registrationcertificate.createPublicVehicleLogBook=function(){var o,i=window.saturne.toolbox.getToken(),n=window.saturne.toolbox.getQuerySeparator(document.URL),e=new FormData($("#public-vehicle-log-book-form")[0]);window.saturne.signature.canvas&&(o=window.saturne.signature.canvas.toDataURL(),e.append("signature",JSON.stringify(o))),$.ajax({url:document.URL+n+"action=add&token="+i,type:"POST",processData:!1,contentType:!1,data:e,success:function(){$(".public-vehicle-log-book-confirmation-close").closest(".card__confirmation").css("display","flex"),$(".public-vehicle-log-book-confirmation-close").on("click",function(){$(".public-vehicle-log-book-confirmation-close").closest(".card__confirmation").css("display","none"),window.location.reload()})},error:function(){}})};